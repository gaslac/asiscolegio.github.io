<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Asistencia</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
        }
        body {
         background-image: url('ffff.jpg');
         background-size: cover;
         background-position: center;
         background-attachment: fixed;
         }
         

        .card {
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            border: none;
        }
        .btn-next {
            background-color: #4e73df;
            color: white;
            font-weight: 500;
        }
        .btn-back {
            border: 1px solid #4e73df;
            color: #4e73df;
        }
        #live-clock {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4e73df;
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        .step {
            display: none;
        }
        .step.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .name-option {
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #e3e6f0;
        }
        .name-option:hover {
            background-color: #f8f9fc;
            transform: translateX(5px);
        }
        .name-option.selected {
            background-color: #4e73df;
            color: white;
            border-color: #4e73df;
        }
        .day-option {
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid #dee2e6;
        }
        .day-option:hover {
            background-color: #f8f9fa;
        }
        .day-option.selected {
            background-color: #4e73df;
            color: white;
        }
        <img src="../../Documents/ffff.jpg" height="1378" width="3040"/><img src="../../Documents/ffff.jpg"
                                                                             height="1378" width="3040"/></style>
</head>
<body>
<!-- Reloj en vivo -->
<div id="live-clock">
    <i class="fas fa-clock me-2"></i>
    <span id="clock-text">00:00:00</span>
</div>

<div class="container mt-5">

    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white py-3">
                    <h4 class="text-center mb-0">Registro de Asistencia</h4>
                </div>
                <div class="card-body p-4">
                    <!-- Paso 1: Selección de cargo -->
                    <div id="step-1" class="step active">
                        <h5 class="text-center mb-4">Seleccione su cargo:</h5>
                        <div class="d-grid gap-3">
                            <div class="name-option" data-role="docente">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-chalkboard-teacher fa-2x me-3"></i>
                                    <div>
                                        <h5 class="mb-1">Docente</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="name-option" data-role="administrativo">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-user-tie fa-2x me-3"></i>
                                    <div>
                                        <h5 class="mb-1">Administrativo</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between mt-4">
                            <button class="btn btn-back" disabled>
                                <i class="fas fa-arrow-left me-2"></i>Atrás
                            </button>
                            <button id="btn-next-1" class="btn btn-next" disabled>
                                Siguiente <i class="fas fa-arrow-right ms-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Paso 2: Selección de nombre -->
                    <div id="step-2" class="step">
                        <h5 class="text-center mb-4" id="step-title">Seleccione su nombre completo</h5>
                        <div id="name-list" class="list-group">
                            <!-- Se llena dinámicamente -->
                        </div>
                        <div class="d-flex justify-content-between mt-4">
                            <button id="btn-back-2" class="btn btn-back">
                                <i class="fas fa-arrow-left me-2"></i>Atrás
                            </button>
                            <button id="btn-next-2" class="btn btn-next" disabled>
                                Siguiente <i class="fas fa-arrow-right ms-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Paso 3: Selección de día -->
                    <div id="step-3" class="step">
                        <h5 class="text-center mb-4">Seleccione el día</h5>
                        <div id="day-list">
                            <div class="day-option" data-day="Lunes">Lunes - 3:00 PM</div>
                            <div class="day-option" data-day="Martes">Martes - 3:00 PM</div>
                            <div class="day-option" data-day="Miércoles">Miércoles - 3:00 PM</div>
                            <div class="day-option" data-day="Jueves">Jueves - 3:00 PM</div>
                            <div class="day-option" data-day="Viernes">Viernes - 3:00 PM</div>
                            <div class="day-option" data-day="Sábado">Sábado - 3:00 PM</div>
                            <div class="day-option" data-day="Domingo">Domingo - 3:00 PM</div>
                        </div>
                        <div class="d-flex justify-content-between mt-4">
                            <button id="btn-back-3" class="btn btn-back">
                                <i class="fas fa-arrow-left me-2"></i>Atrás
                            </button>
                            <button id="btn-next-3" class="btn btn-next" disabled>
                                Confirmar <i class="fas fa-check ms-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Paso 4: Confirmación -->
                    <div id="step-4" class="step">
                        <div class="text-center">
                            <i class="fas fa-calendar-check fa-4x mb-3 text-success"></i>
                            <h4>Confirmación de Asistencia</h4>
                            <div class="my-4">
                                <p><strong>Nombre:</strong> <span id="conf-name"></span></p>
                                <p><strong>Cargo:</strong> <span id="conf-role"></span></p>
                                <p><strong>Día:</strong> <span id="conf-day"></span> - 3:00 PM</p>
                                <p><strong>Hora de registro:</strong> <span id="conf-time"></span></p>
                            </div>
                        </div>
                        <button id="btn-confirm" class="btn btn-success btn-lg w-100 py-3">
                            <i class="fas fa-fingerprint me-2"></i> CONFIRMAR ASISTENCIA
                        </button>
                        <div class="d-flex justify-content-between mt-4">
                            <button id="btn-back-4" class="btn btn-back">
                                <i class="fas fa-arrow-left me-2"></i>Atrás
                            </button>
                            <button id="btn-restart" class="btn btn-primary">
                                <i class="fas fa-redo me-2"></i>Nuevo registro
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Datos de personal
    const staff = {
        docente: [
            "QUISPE HUACCHA ELENA BEATRIZ",
            "SULCARAYME QUISPE MAGLORIA",
            "ACUÑA MEDRANO SOLEDAD",
            "VELARDE ELSA",
            "CHURA ARTEMIO",
            "PIÑAS ROSARIO",
            "HUAMANCHUMO LOPEZ JAVIER ARTURO",
            "POMA EMERSON",
            "YANTAS LEON JAIME",
            "HUINCHO SUÁREZ ORLANDO MARINO",
            "LLERENA LARRAÑAGA FRANCISCO",
            "TAPIA MANRIQUE SEBASTIANA PILAR",
            "BUSTILLOS LOVATÓN CARMEN ROSALÍA",
            "JAIME YANTAS LEÓN",
            "CASTAÑEDA GUERRA OLGA BERTHA",
            "VALVERDE ESTRADA PATRICIA OLIVIA"
        ],
        administrativo: [
            "GRACIELA ENMA VASQUEZ PURIS",
            "DIRECTOR",
            "ADMIN 1",
            "ADMIN 2",
            "ADMIN 3"
        ]
    };

    // Variables globales
    let currentStep = 1;
    let selectedRole = '';
    let selectedName = '';
    let selectedDay = '';

    // Reloj en vivo
    function updateClock() {
        const now = new Date();
        document.getElementById('clock-text').textContent = now.toLocaleTimeString('es-PE');
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Paso 1: Selección de cargo
    document.querySelectorAll('.name-option[data-role]').forEach(option => {
        option.addEventListener('click', function() {
            document.querySelectorAll('.name-option').forEach(opt => opt.classList.remove('selected'));
            this.classList.add('selected');
            selectedRole = this.getAttribute('data-role');
            document.getElementById('btn-next-1').disabled = false;
        });
    });

    ///guarda
    document.getElementById('btn-confirm').addEventListener('click', function() {
    const now = new Date();
    const horaRegistro = now.toLocaleTimeString('es-PE');

    const asistencia = {
        nombre: selectedName,
        cargo: selectedRole,
        dia: selectedDay,
        hora: horaRegistro
    };

    fetch("https://script.google.com/macros/s/AKfycbwG4RWnZs7_kEOXTdiqljLKOtCJy7jDclqeGgVnqX6cIDW69QGfsALPG_hyqKlzeM2I/exec", {
        method: "POST",
        mode: "no-cors",  // <---- Agrega esto
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(asistencia)
    })
    .then(() => {
        alert("✅ Asistencia guardada correctamente.");
    })
    .catch(error => {
        alert("❌ Error al guardar la asistencia: " + error);
    });
});


    // Botón siguiente (Paso 1 → Paso 2)
    document.getElementById('btn-next-1').addEventListener('click', function() {
        const title = selectedRole === 'docente'
            ? 'Seleccione el docente'
            : 'Seleccione el administrativo';

        document.getElementById('step-title').textContent = title;

        // Llenar lista de nombres
        const nameList = document.getElementById('name-list');
        nameList.innerHTML = '';

        staff[selectedRole].forEach(name => {
            const div = document.createElement('div');
            div.className = 'name-option';
            div.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas fa-user ${selectedRole === 'docente' ? 'fa-chalkboard' : 'fa-briefcase'} me-3"></i>
                    <div>
                        <h5 class="mb-0">${name}</h5>
                    </div>
                </div>
            `;
            div.addEventListener('click', function() {
                document.querySelectorAll('#name-list .name-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedName = name;
                document.getElementById('btn-next-2').disabled = false;
            });
            nameList.appendChild(div);
        });

        changeStep(2);
    });

    // Paso 2: Botón atrás (→ Paso 1)
    document.getElementById('btn-back-2').addEventListener('click', () => changeStep(1));

    // Paso 2: Botón siguiente (→ Paso 3)
    document.getElementById('btn-next-2').addEventListener('click', () => changeStep(3));

    // Paso 3: Selección de día
    document.querySelectorAll('.day-option').forEach(option => {
        option.addEventListener('click', function() {
            document.querySelectorAll('.day-option').forEach(opt => opt.classList.remove('selected'));
            this.classList.add('selected');
            selectedDay = this.getAttribute('data-day');
            document.getElementById('btn-next-3').disabled = false;
        });
    });

    // Paso 3: Botón atrás (→ Paso 2)
    document.getElementById('btn-back-3').addEventListener('click', () => changeStep(2));

    // Paso 3: Botón siguiente (→ Paso 4)
    document.getElementById('btn-next-3').addEventListener('click', function() {
        document.getElementById('conf-name').textContent = selectedName;
        document.getElementById('conf-role').textContent = selectedRole;
        document.getElementById('conf-day').textContent = selectedDay;
        document.getElementById('conf-time').textContent = new Date().toLocaleTimeString('es-PE');
        changeStep(4);
    });

    // Paso 4: Botón atrás (→ Paso 3)
    document.getElementById('btn-back-4').addEventListener('click', () => changeStep(3));

    // Paso 4: Botón confirmar
    document.getElementById('btn-confirm').addEventListener('click', function() {
        const now = new Date();
        alert(`✅ Asistencia confirmada:\n\n${selectedName}\n${selectedRole}\n${selectedDay} - 3:00 PM\nRegistrado a las: ${now.toLocaleTimeString('es-PE')}`);
    });

    // Botón reiniciar
    document.getElementById('btn-restart').addEventListener('click', function() {
        // Resetear selecciones
        document.querySelectorAll('.selected').forEach(el => el.classList.remove('selected'));
        selectedRole = '';
        selectedName = '';
        selectedDay = '';

        // Resetear botones
        document.querySelectorAll('[id^="btn-next"]').forEach(btn => btn.disabled = true);

        changeStep(1);
    });

    // Función para cambiar de paso
    function changeStep(step) {
        document.getElementById(`step-${currentStep}`).classList.remove('active');
        currentStep = step;
        document.getElementById(`step-${currentStep}`).classList.add('active');
    }
</script>
</body>
</html>
